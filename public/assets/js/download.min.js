const sites=["https://maven.bzgzs.cn","https://b.maven.bzgzs.cn"];const names=["主站点 | Main","备用站点 | Backup"];const connectivity=[false,false];function start($,url){testSites($,url);let future=new Date((new Date).getTime()+5e3);let interval=setInterval(function(){const time=$(".time");const downloadLink=$(".download-link");if(future.getSeconds()-(new Date).getSeconds()<=0){time.text(0);clearInterval(interval);appendSite($,url);$(downloadLink).toggleClass("done");return}time.text(future.getSeconds()-(new Date).getSeconds())},1e3)}function testSites($,url){sites.forEach((value,index)=>{$.ajax({url:value+url+".md5",type:"GET",async:true,success:function(){connectivity[index]=true}})})}function appendSite($,url){let hasSelected=false;const selected=document.getElementById("selected");const optional=document.getElementById("optional");sites.forEach((value,index)=>{const link=document.createElement("a");link.target="_self";link.href=sites[index]+url;link.innerText=names[index];if(connectivity[index]&&!hasSelected){const site=document.createElement("li");site.appendChild(link);site.classList.add("ok");selected.appendChild(site);hasSelected=true;$(link)[0].click()}else{const option=document.createElement("li");option.appendChild(link);if(connectivity[index])option.classList.add("ok");optional.appendChild(option)}});if(!hasSelected)$(document.getElementById("failed")).fadeIn();$(document.getElementById("sites")).fadeIn()}